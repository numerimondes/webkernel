===== DIRECTORY TREE =====
platform/EnjoyTheWorld/Filament/Resources
├── merged.txt
├── Providers
│   ├── Pages
│   │   ├── CreateProvider.php
│   │   ├── EditProvider.php
│   │   └── ListProviders.php
│   ├── ProviderResource.php
│   ├── RelationManagers
│   │   └── ServicesRelationManager.php
│   ├── Schemas
│   │   ├── ProviderForm.php
│   │   └── ServiceForm.php
│   └── Tables
│       └── ProvidersTable.php
└── Services
    ├── Pages
    │   ├── CreateService.php
    │   ├── EditService.php
    │   └── ListServices.php
    ├── Schemas
    │   └── ServiceForm.php
    ├── ServiceResource.php
    └── Tables
        └── ServicesTable.php

10 directories, 15 files

===== FILES CONTENT =====


===== platform/EnjoyTheWorld/Filament/Resources/Providers/Pages/CreateProvider.php =====
<?php

namespace Platform\EnjoyTheWorld\Filament\Resources\Providers\Pages;

use Platform\EnjoyTheWorld\Filament\Resources\Providers\ProviderResource;
use Filament\Resources\Pages\CreateRecord;

class CreateProvider extends CreateRecord
{
  protected static string $resource = ProviderResource::class;
}

===== platform/EnjoyTheWorld/Filament/Resources/Providers/Pages/EditProvider.php =====
<?php

namespace Platform\EnjoyTheWorld\Filament\Resources\Providers\Pages;

use Platform\EnjoyTheWorld\Filament\Resources\Providers\ProviderResource;
use Filament\Actions\DeleteAction;
use Filament\Actions\ForceDeleteAction;
use Filament\Actions\RestoreAction;
use Filament\Resources\Pages\EditRecord;

class EditProvider extends EditRecord
{
  protected static string $resource = ProviderResource::class;

  protected function getHeaderActions(): array
  {
    return [DeleteAction::make(), ForceDeleteAction::make(), RestoreAction::make()];
  }
}

===== platform/EnjoyTheWorld/Filament/Resources/Providers/Pages/ListProviders.php =====
<?php

namespace Platform\EnjoyTheWorld\Filament\Resources\Providers\Pages;

use Platform\EnjoyTheWorld\Filament\Resources\Providers\ProviderResource;
use Filament\Actions\CreateAction;
use Filament\Resources\Pages\ListRecords;

class ListProviders extends ListRecords
{
  protected static string $resource = ProviderResource::class;

  protected function getHeaderActions(): array
  {
    return [CreateAction::make()];
  }
}

===== platform/EnjoyTheWorld/Filament/Resources/Providers/ProviderResource.php =====
<?php

declare(strict_types=1);

namespace Platform\EnjoyTheWorld\Filament\Resources\Providers;

use BackedEnum;
use Filament\Resources\Resource;
use Filament\Schemas\Schema;
use Filament\Support\Icons\Heroicon;
use Filament\Tables\Table;
use Illuminate\Database\Eloquent\Builder;
use Illuminate\Database\Eloquent\SoftDeletingScope;
use Platform\EnjoyTheWorld\Filament\Resources\Providers\Pages\CreateProvider;
use Platform\EnjoyTheWorld\Filament\Resources\Providers\Pages\EditProvider;
use Platform\EnjoyTheWorld\Filament\Resources\Providers\Pages\ListProviders;
use Platform\EnjoyTheWorld\Filament\Resources\Providers\Schemas\ProviderForm;
use Platform\EnjoyTheWorld\Filament\Resources\Providers\Tables\ProvidersTable;
use Platform\EnjoyTheWorld\Models\Provider;

class ProviderResource extends Resource
{
  protected static ?string $model = Provider::class;

  protected static string|BackedEnum|null $navigationIcon = Heroicon::OutlinedRectangleStack;

  protected static ?string $recordTitleAttribute = 'company_name';

  // protected static ?string $navigationGroup = 'Services Management';

  protected static ?int $navigationSort = 10;

  /**
   * Get navigation label
   *
   * @return string
   */
  public static function getNavigationLabel(): string
  {
    return __('Providers');
  }

  /**
   * Get plural label
   *
   * @return string
   */
  public static function getPluralLabel(): string
  {
    return __('Providers');
  }

  /**
   * Get model label
   *
   * @return string
   */
  public static function getModelLabel(): string
  {
    return __('Provider');
  }

  /**
   * Configure form schema
   *
   * @param Schema $schema
   * @return Schema
   */
  public static function form(Schema $schema): Schema
  {
    return ProviderForm::configure($schema);
  }

  /**
   * Configure table
   *
   * @param Table $table
   * @return Table
   */
  public static function table(Table $table): Table
  {
    return ProvidersTable::configure($table);
  }

  /**
   * Get relation managers
   *
   * @return array<class-string>
   */
  public static function getRelations(): array
  {
    return [RelationManagers\ServicesRelationManager::class];
  }

  /**
   * Get pages configuration
   *
   * @return array<string, \Filament\Resources\Pages\PageRegistration>
   */
  public static function getPages(): array
  {
    return [
      'index' => ListProviders::route('/'),
      'create' => CreateProvider::route('/create'),
      'edit' => EditProvider::route('/{record}/edit'),
    ];
  }

  /**
   * Get Eloquent query for route model binding
   *
   * @return Builder
   */
  public static function getEloquentQuery(): Builder
  {
    return parent::getEloquentQuery()->withoutGlobalScopes([SoftDeletingScope::class]);
  }

  /**
   * Can view any
   *
   * @return bool
   */
  public static function canViewAny(): bool
  {
    return true;
  }

  /**
   * Can create
   *
   * @return bool
   */
  public static function canCreate(): bool
  {
    return true;
  }

  /**
   * Can edit
   *
   * @param Provider $record
   * @return bool
   */
  public static function canEdit($record): bool
  {
    return true;
  }

  /**
   * Can delete
   *
   * @param Provider $record
   * @return bool
   */
  public static function canDelete($record): bool
  {
    return true;
  }
}

===== platform/EnjoyTheWorld/Filament/Resources/Providers/RelationManagers/ServicesRelationManager.php =====
<?php

declare(strict_types=1);

namespace Platform\EnjoyTheWorld\Filament\Resources\Providers\RelationManagers;

use Filament\Actions\AssociateAction;
use Filament\Actions\BulkActionGroup;
use Filament\Actions\CreateAction;
use Filament\Actions\DeleteAction;
use Filament\Actions\DissociateAction;
use Filament\Actions\DissociateBulkAction;
use Filament\Actions\EditAction;
use Filament\Actions\ViewAction;
use Filament\Resources\RelationManagers\RelationManager;
use Filament\Schemas\Schema;
use Filament\Tables;
use Filament\Tables\Table;
use Illuminate\Database\Eloquent\Builder;
use Illuminate\Database\Eloquent\Model;
use Platform\EnjoyTheWorld\Filament\Resources\Providers\Schemas\ServiceForm;
use Platform\EnjoyTheWorld\Models\Service;
use Platform\EnjoyTheWorld\Filament\Resources\ServiceResource\Pages\{CreateService, EditService};

class ServicesRelationManager extends RelationManager
{
  protected static string $relationship = 'services';

  protected static ?string $recordTitleAttribute = 'id';

  /**
   * Get relation manager title
   *
   * @return string
   */
  public static function getTitle(Model $ownerRecord, string $pageClass): string
  {
    return __('Services');
  }

  /**
   * Configure form schema
   *
   * @param Schema $schema
   * @return Schema
   */
  public function form(Schema $schema): Schema
  {
    return ServiceForm::configure($schema);
  }

  /**
   * Configure table
   *
   * @param Table $table
   * @return Table
   */
  public function table(Table $table): Table
  {
    return $table
      ->recordTitle(fn(Model $record): string => $this->getRecordTitle($record))
      ->columns($this->getColumns())
      ->filters($this->getFilters())
      ->headerActions($this->getHeaderActions())
      ->actions($this->getTableActions())
      ->bulkActions($this->getBulkActions())
      ->defaultSort('created_at', 'desc');
  }

  /**
   * Get record title
   *
   * @param Model $record
   * @return string
   */
  protected function getRecordTitle(Model $record): string
  {
    if (!$record instanceof Service) {
      return "Service #{$record->id}";
    }

    $translation = $record->translation(app()->getLocale()) ?? $record->translations->first();

    return $translation?->title ?? "Service #{$record->id}";
  }

  /**
   * Get table columns
   *
   * @return array<int, \Filament\Tables\Columns\Column>
   */
  protected function getColumns(): array
  {
    return [
      Tables\Columns\TextColumn::make('serviceType.translations.name')
        ->label(__('Type'))
        ->sortable()
        ->searchable()
        ->getStateUsing(function (Service $record): ?string {
          $translation = $record->serviceType?->translations->where('language_code', app()->getLocale())->first();

          return $translation?->name ?? $record->serviceType?->translations->first()?->name;
        })
        ->badge()
        ->color('info'),

      Tables\Columns\TextColumn::make('translations.title')
        ->label(__('Title'))
        ->getStateUsing(fn(Service $record): ?string => $record->translation(app()->getLocale())?->title)
        ->limit(50)
        ->searchable()
        ->wrap(),

      Tables\Columns\TextColumn::make('price')->label(__('Price'))->money('EUR')->sortable()->alignEnd(),

      Tables\Columns\TextColumn::make('duration')->label(__('Duration'))->searchable()->badge()->color('gray'),

      Tables\Columns\TextColumn::make('location')->label(__('Location'))->searchable()->wrap()->limit(30)->toggleable(),

      Tables\Columns\IconColumn::make('is_active')
        ->label(__('Active'))
        ->boolean()
        ->trueColor('success')
        ->falseColor('danger')
        ->sortable(),

      Tables\Columns\IconColumn::make('is_featured')
        ->label(__('Featured'))
        ->boolean()
        ->trueColor('warning')
        ->falseColor('gray')
        ->sortable(),

      Tables\Columns\TextColumn::make('media_count')
        ->label(__('Media'))
        ->counts('media')
        ->sortable()
        ->alignCenter()
        ->badge()
        ->color('primary'),
    ];
  }

  /**
   * Get table filters
   *
   * @return array<int, \Filament\Tables\Filters\BaseFilter>
   */
  protected function getFilters(): array
  {
    return [
      Tables\Filters\TernaryFilter::make('is_active')
        ->label(__('Active'))
        ->placeholder(__('All'))
        ->trueLabel(__('Active only'))
        ->falseLabel(__('Inactive only')),

      Tables\Filters\TernaryFilter::make('is_featured')
        ->label(__('Featured'))
        ->placeholder(__('All'))
        ->trueLabel(__('Featured only'))
        ->falseLabel(__('Not featured')),
    ];
  }

  /**
   * Get header actions
   *
   * @return array<int, \Filament\Actions\Action>
   */
  protected function getHeaderActions(): array
  {
    return [
      CreateAction::make()->label(__('Create Service'))->url(
        fn(): string => static::getUrl('create', [
          'ownerRecord' => $this->getOwnerRecord(),
        ]),
      ),

      AssociateAction::make()
        ->label(__('Associate Service'))
        ->preloadRecordSelect()
        ->recordSelectOptionsQuery(fn(Builder $query): Builder => $query->whereNull('provider_id'))
        ->recordSelectSearchColumns(['id', 'location'])
        ->recordTitleAttribute('id'),
    ];
  }

  /**
   * Get table actions
   *
   * @return array<int, \Filament\Tables\Actions\Action>
   */
  protected function getTableActions(): array
  {
    return [
      Tables\Actions\Action::make('edit')->label(__('Edit'))->icon('heroicon-o-pencil')->url(
        fn(Service $record): string => static::getUrl('edit', [
          'record' => $record,
          'ownerRecord' => $this->getOwnerRecord(),
        ]),
      ),

      DissociateAction::make()->label(__('Dissociate')),

      DeleteAction::make()->label(__('Delete')),
    ];
  }

  /**
   * Get relation manager pages
   *
   * @return array<string, string>
   */
  public static function getPages(): array
  {
    return [
      'create' => CreateService::route('/create'),
      'edit' => EditService::route('/{record}/edit'),
    ];
  }

  /**
   * Get bulk actions
   *
   * @return array<int, \Filament\Tables\Actions\BulkAction>
   */
  protected function getBulkActions(): array
  {
    return [BulkActionGroup::make([DissociateBulkAction::make()->label(__('Dissociate selected'))])];
  }
}

===== platform/EnjoyTheWorld/Filament/Resources/Providers/Schemas/ProviderForm.php =====
<?php

declare(strict_types=1);

namespace Platform\EnjoyTheWorld\Filament\Resources\Providers\Schemas;

use Filament\Forms\Components\Select;
use Filament\Forms\Components\TextInput;
use Filament\Forms\Components\Toggle;
use Filament\Schemas\Schema;

class ProviderForm
{
  /**
   * Configure provider form schema
   *
   * @param Schema $schema
   * @return Schema
   */
  public static function configure(Schema $schema): Schema
  {
    return $schema->schema(self::getSchema());
  }

  /**
   * Get form schema components
   *
   * @return array<int, \Filament\Forms\Components\Component>
   */
  public static function getSchema(): array
  {
    return [
      Select::make('user_id')
        ->label(__('Associated User'))
        ->relationship('user', 'name')
        ->searchable()
        ->preload()
        ->required()
        ->helperText(__('Select the user account for this provider')),

      TextInput::make('company_name')
        ->label(__('Company Name'))
        ->required()
        ->maxLength(255)
        ->helperText(__('Full legal company name')),

      TextInput::make('phone')->label(__('Phone Number'))->tel()->maxLength(20)->helperText(__('Contact phone number')),

      TextInput::make('website')
        ->label(__('Website URL'))
        ->url()
        ->maxLength(255)
        ->helperText(__('Company website (https://example.com)')),

      Toggle::make('is_active')
        ->label(__('Active Status'))
        ->default(true)
        ->helperText(__('Enable or disable this provider')),
    ];
  }
}

===== platform/EnjoyTheWorld/Filament/Resources/Providers/Schemas/ServiceForm.php =====
<?php

declare(strict_types=1);

namespace Platform\EnjoyTheWorld\Filament\Resources\Providers\Schemas;

use Filament\Forms\Components\FileUpload;
use Filament\Forms\Components\Repeater;
use Filament\Forms\Components\Section;
use Filament\Forms\Components\Select;
use Filament\Forms\Components\Tabs;
use Filament\Forms\Components\Textarea;
use Filament\Forms\Components\TextInput;
use Filament\Forms\Components\Toggle;
use Filament\Forms\Get;
use Filament\Schemas\Schema;
use Platform\EnjoyTheWorld\Models\ServiceType;

class ServiceForm
{
  /**
   * Configure service form schema
   *
   * @param Schema $schema
   * @return Schema
   */
  public static function configure(Schema $schema): Schema
  {
    return $schema->schema(self::getSchema());
  }

  /**
   * Get form schema components
   *
   * @return array<int, \Filament\Forms\Components\Component>
   */
  public static function getSchema(): array
  {
    return [
      Section::make(__('Basic Information'))
        ->schema([
          Select::make('service_type_id')
            ->label(__('Service Type'))
            ->options(self::getServiceTypeOptions())
            ->searchable()
            ->preload()
            ->required()
            ->reactive()
            ->helperText(__('Select the category of service'))
            ->columnSpan(2),

          TextInput::make('price')
            ->label(__('Price (EUR)'))
            ->numeric()
            ->required()
            ->step(0.01)
            ->prefix('EUR')
            ->minValue(0)
            ->helperText(__('Service price in euros')),

          TextInput::make('duration')
            ->label(__('Duration'))
            ->required()
            ->maxLength(50)
            ->placeholder(__('e.g., 2h, 3 days'))
            ->helperText(__('Expected duration of the service')),

          TextInput::make('location')
            ->label(__('Location'))
            ->required()
            ->maxLength(255)
            ->helperText(__('Where the service is provided'))
            ->columnSpanFull(),

          Toggle::make('is_active')
            ->label(__('Active'))
            ->default(true)
            ->inline(false)
            ->helperText(__('Make service visible to customers')),

          Toggle::make('is_featured')
            ->label(__('Featured'))
            ->default(false)
            ->inline(false)
            ->helperText(__('Highlight this service')),
        ])
        ->columns(2),

      Tabs::make(__('Content'))->tabs(self::getTranslationTabs())->columnSpanFull(),

      Section::make(__('Media Gallery'))
        ->schema([
          Repeater::make('media')
            ->relationship('media')
            ->schema([
              Select::make('type')
                ->label(__('Media Type'))
                ->options([
                  'image' => __('Image'),
                  'video' => __('Video'),
                ])
                ->required()
                ->reactive()
                ->columnSpan(1),

              FileUpload::make('url')
                ->label(__('File'))
                ->required()
                ->directory('services/media')
                ->maxSize(10240)
                //->acceptedFileTypes(fn(Get $get): array => $get('type') === 'image' ? ['image/*'] : ['video/*'])
                ->imageEditor()
                ->imageEditorAspectRatios(['16:9', '4:3', '1:1'])
                ->columnSpan(2),

              TextInput::make('caption')->label(__('Caption'))->maxLength(255)->columnSpan(2),

              TextInput::make('order')->label(__('Display Order'))->numeric()->default(0)->minValue(0)->columnSpan(1),
            ])
            ->columns(3)
            ->defaultItems(0)
            ->collapsible()
            ->itemLabel(
              fn(array $state): ?string => isset($state['type'])
                ? ucfirst($state['type']) . ' #' . ($state['order'] ?? 0)
                : null,
            )
            ->reorderable()
            ->reorderableWithButtons()
            ->addActionLabel(__('Add Media'))
            ->collapsed(),
        ])
        ->collapsible(),
    ];
  }

  /**
   * Get translation tabs
   *
   * @return array<int, \Filament\Forms\Components\Tabs\Tab>
   */
  protected static function getTranslationTabs(): array
  {
    $languages = [
      'en' => ['label' => __('English'), 'icon' => 'heroicon-o-flag'],
      'fr' => ['label' => __('French'), 'icon' => 'heroicon-o-flag'],
      'es' => ['label' => __('Spanish'), 'icon' => 'heroicon-o-flag'],
      'de' => ['label' => __('German'), 'icon' => 'heroicon-o-flag'],
      'it' => ['label' => __('Italian'), 'icon' => 'heroicon-o-flag'],
    ];

    $tabs = [];

    foreach ($languages as $code => $config) {
      $tabs[] = Tabs\Tab::make($config['label'])
        ->icon($config['icon'])
        ->schema([
          TextInput::make("translation_{$code}_title")
            ->label(__('Title'))
            ->maxLength(255)
            ->required($code === 'en')
            ->afterStateHydrated(function (TextInput $component, $state, $record) use ($code): void {
              if ($record && method_exists($record, 'translation')) {
                $translation = $record->translation($code);
                $component->state($translation?->title);
              }
            })
            ->dehydrated(false),

          Textarea::make("translation_{$code}_description")
            ->label(__('Description'))
            ->rows(6)
            ->maxLength(65535)
            ->afterStateHydrated(function (Textarea $component, $state, $record) use ($code): void {
              if ($record && method_exists($record, 'translation')) {
                $translation = $record->translation($code);
                $component->state($translation?->description);
              }
            })
            ->dehydrated(false),
        ])
        ->columns(1);
    }

    return $tabs;
  }

  /**
   * Get service type options
   *
   * @return array<int, string>
   */
  protected static function getServiceTypeOptions(): array
  {
    return ServiceType::query()
      ->active()
      ->with('translations')
      ->get()
      ->mapWithKeys(function (ServiceType $type): array {
        $name =
          $type->translations->where('language_code', app()->getLocale())->first()?->name ??
          ($type->translations->first()?->name ?? __('Unnamed Service Type'));

        return [$type->id => $name];
      })
      ->toArray();
  }
}

===== platform/EnjoyTheWorld/Filament/Resources/Providers/Tables/ProvidersTable.php =====
<?php

declare(strict_types=1);

namespace Platform\EnjoyTheWorld\Filament\Resources\Providers\Tables;

use Filament\Actions\BulkActionGroup;
use Filament\Actions\DeleteBulkAction;
use Filament\Actions\EditAction;
use Filament\Actions\ForceDeleteBulkAction;
use Filament\Actions\RestoreBulkAction;
use Filament\Tables\Columns\IconColumn;
use Filament\Tables\Columns\TextColumn;
use Filament\Tables\Filters\SelectFilter;
use Filament\Tables\Filters\TrashedFilter;
use Filament\Tables\Table;

class ProvidersTable
{
  /**
   * Configure providers table
   *
   * @param Table $table
   * @return Table
   */
  public static function configure(Table $table): Table
  {
    return $table
      ->columns(self::getColumns())
      ->filters(self::getFilters())
      ->actions(self::getActions())
      ->bulkActions(self::getBulkActions())
      ->defaultSort('created_at', 'desc');
  }

  /**
   * Get table columns
   *
   * @return array<int, \Filament\Tables\Columns\Column>
   */
  protected static function getColumns(): array
  {
    return [
      TextColumn::make('user.name')->label(__('User'))->sortable()->searchable()->toggleable(),

      TextColumn::make('company_name')->label(__('Company'))->sortable()->searchable()->wrap()->weight('bold'),

      TextColumn::make('phone')
        ->label(__('Phone'))
        ->searchable()
        ->toggleable()
        ->copyable()
        ->copyMessage(__('Phone copied'))
        ->copyMessageDuration(1500),

      TextColumn::make('website')
        ->label(__('Website'))
        ->url(fn($record): ?string => $record->website, shouldOpenInNewTab: true)
        ->wrap()
        ->toggleable()
        ->limit(30),

      IconColumn::make('is_active')
        ->label(__('Active'))
        ->boolean()
        ->trueIcon('heroicon-o-check-circle')
        ->falseIcon('heroicon-o-x-circle')
        ->trueColor('success')
        ->falseColor('danger')
        ->sortable(),

      TextColumn::make('services_count')
        ->label(__('Services'))
        ->counts('services')
        ->sortable()
        ->alignCenter()
        ->badge()
        ->color('primary'),

      TextColumn::make('created_at')
        ->label(__('Created'))
        ->dateTime()
        ->sortable()
        ->toggleable(isToggledHiddenByDefault: true),

      TextColumn::make('updated_at')
        ->label(__('Updated'))
        ->dateTime()
        ->sortable()
        ->toggleable(isToggledHiddenByDefault: true),
    ];
  }

  /**
   * Get table filters
   *
   * @return array<int, \Filament\Tables\Filters\BaseFilter>
   */
  protected static function getFilters(): array
  {
    return [
      SelectFilter::make('is_active')
        ->label(__('Status'))
        ->options([
          '1' => __('Active'),
          '0' => __('Inactive'),
        ])
        ->placeholder(__('All')),

      TrashedFilter::make()->label(__('Deleted'))->placeholder(__('Without deleted')),
    ];
  }

  /**
   * Get table actions
   *
   * @return array<int, \Filament\Tables\Actions\Action>
   */
  protected static function getActions(): array
  {
    return [EditAction::make()->label(__('Edit'))];
  }

  /**
   * Get bulk actions
   *
   * @return array<int, \Filament\Tables\Actions\BulkAction>
   */
  protected static function getBulkActions(): array
  {
    return [
      BulkActionGroup::make([
        DeleteBulkAction::make()->label(__('Delete selected')),

        ForceDeleteBulkAction::make()->label(__('Force delete selected')),

        RestoreBulkAction::make()->label(__('Restore selected')),
      ]),
    ];
  }
}

===== platform/EnjoyTheWorld/Filament/Resources/Services/Pages/CreateService.php =====
<?php

declare(strict_types=1);

namespace Platform\EnjoyTheWorld\Filament\Resources\ServiceResource\Pages;

use Filament\Resources\Pages\CreateRecord;
use Platform\EnjoyTheWorld\Filament\Resources\ServiceResource;
use Platform\EnjoyTheWorld\Models\Service;

class CreateService extends CreateRecord
{
  protected static string $resource = ServiceResource::class;
  /**
   * Get breadcrumb
   *
   * @return string
   */
  public function getBreadcrumb(): string
  {
    return __('Create');
  }

  /**
   * Get title
   *
   * @return string
   */
  public function getTitle(): string
  {
    return __('Create Service');
  }

  /**
   * Mutate form data before create
   *
   * @param array<string, mixed> $data
   * @return array<string, mixed>
   */
  protected function mutateFormDataBeforeCreate(array $data): array
  {
    // Extract translation fields
    $translations = [];
    $languages = ['en', 'fr', 'es', 'de', 'it'];

    foreach ($languages as $code) {
      $titleKey = "translation_{$code}_title";
      $descKey = "translation_{$code}_description";

      if (isset($data[$titleKey]) || isset($data[$descKey])) {
        $translations[] = [
          'language_code' => $code,
          'title' => $data[$titleKey] ?? '',
          'description' => $data[$descKey] ?? '',
        ];

        // Remove from main data array
        unset($data[$titleKey], $data[$descKey]);
      }
    }

    // Store translations for after create
    $this->translationsToSync = $translations;

    // Ensure provider_id is set from the relation manager owner
    if (!isset($data['provider_id']) && $this->getOwnerRecord()) {
      $data['provider_id'] = $this->getOwnerRecord()->getKey();
    }

    return $data;
  }

  /**
   * Translations to sync
   *
   * @var array<int, array<string, string>>
   */
  protected array $translationsToSync = [];

  /**
   * After create hook
   *
   * @return void
   */
  protected function afterCreate(): void
  {
    $record = $this->getRecord();

    if (!$record instanceof Service || empty($this->translationsToSync)) {
      return;
    }

    foreach ($this->translationsToSync as $translationData) {
      // Skip empty translations
      if (empty($translationData['title']) && empty($translationData['description'])) {
        continue;
      }

      $record->translations()->create([
        'language_code' => $translationData['language_code'],
        'title' => $translationData['title'],
        'description' => $translationData['description'],
      ]);
    }
  }

  /**
   * Get owner record (provider)
   *
   * @return \Illuminate\Database\Eloquent\Model|null
   */
  protected function getOwnerRecord(): ?\Illuminate\Database\Eloquent\Model
  {
    // This will be set by the relation manager
    return $this->ownerRecord ?? null;
  }
}

===== platform/EnjoyTheWorld/Filament/Resources/Services/Pages/EditService.php =====
<?php

declare(strict_types=1);

namespace Platform\EnjoyTheWorld\Filament\Resources\ServiceResource\Pages;

use Filament\Actions\DeleteAction;
use Filament\Resources\Pages\EditRecord;
use Illuminate\Database\Eloquent\Model;
use Platform\EnjoyTheWorld\Filament\Resources\ServiceResource;
use Platform\EnjoyTheWorld\Models\Service;

class EditService extends EditRecord
{
  protected static string $resource = ServiceResource::class;
  /**
   * Get breadcrumb
   *
   * @return string
   */
  public function getBreadcrumb(): string
  {
    return __('Edit');
  }

  /**
   * Get title
   *
   * @return string
   */
  public function getTitle(): string
  {
    return __('Edit Service');
  }

  /**
   * Get header actions
   *
   * @return array<int, \Filament\Actions\Action>
   */
  protected function getHeaderActions(): array
  {
    return [DeleteAction::make()->label(__('Delete'))->requiresConfirmation()];
  }

  /**
   * Mutate form data before fill
   *
   * @param array<string, mixed> $data
   * @return array<string, mixed>
   */
  protected function mutateFormDataBeforeFill(array $data): array
  {
    $record = $this->getRecord();

    if (!$record instanceof Service) {
      return $data;
    }

    // Load translations into individual fields
    $languages = ['en', 'fr', 'es', 'de', 'it'];

    foreach ($languages as $code) {
      $translation = $record->translation($code);

      if ($translation) {
        $data["translation_{$code}_title"] = $translation->title;
        $data["translation_{$code}_description"] = $translation->description;
      }
    }

    return $data;
  }

  /**
   * Mutate form data before save
   *
   * @param array<string, mixed> $data
   * @return array<string, mixed>
   */
  protected function mutateFormDataBeforeSave(array $data): array
  {
    // Extract translation fields
    $translations = [];
    $languages = ['en', 'fr', 'es', 'de', 'it'];

    foreach ($languages as $code) {
      $titleKey = "translation_{$code}_title";
      $descKey = "translation_{$code}_description";

      if (isset($data[$titleKey]) || isset($data[$descKey])) {
        $translations[] = [
          'language_code' => $code,
          'title' => $data[$titleKey] ?? '',
          'description' => $data[$descKey] ?? '',
        ];

        // Remove from main data array
        unset($data[$titleKey], $data[$descKey]);
      }
    }

    // Store translations for after save
    $this->translationsToSync = $translations;

    return $data;
  }

  /**
   * Translations to sync
   *
   * @var array<int, array<string, string>>
   */
  protected array $translationsToSync = [];

  /**
   * After save hook
   *
   * @return void
   */
  protected function afterSave(): void
  {
    $record = $this->getRecord();

    if (!$record instanceof Service || empty($this->translationsToSync)) {
      return;
    }

    foreach ($this->translationsToSync as $translationData) {
      // Skip empty translations
      if (empty($translationData['title']) && empty($translationData['description'])) {
        continue;
      }

      $record->translations()->updateOrCreate(
        [
          'language_code' => $translationData['language_code'],
        ],
        [
          'title' => $translationData['title'],
          'description' => $translationData['description'],
        ],
      );
    }
  }
}

===== platform/EnjoyTheWorld/Filament/Resources/Services/Pages/ListServices.php =====
<?php

namespace Platform\EnjoyTheWorld\Filament\Resources\Services\Pages;

use Filament\Actions\CreateAction;
use Filament\Resources\Pages\ListRecords;
use Platform\EnjoyTheWorld\Filament\Resources\Services\ServiceResource;

class ListServices extends ListRecords
{
    protected static string $resource = ServiceResource::class;

    protected function getHeaderActions(): array
    {
        return [
            CreateAction::make(),
        ];
    }
}

===== platform/EnjoyTheWorld/Filament/Resources/Services/Schemas/ServiceForm.php =====
<?php

namespace Platform\EnjoyTheWorld\Filament\Resources\Services\Schemas;

use Filament\Schemas\Schema;

class ServiceForm
{
    public static function configure(Schema $schema): Schema
    {
        return $schema
            ->components([
                //
            ]);
    }
}

===== platform/EnjoyTheWorld/Filament/Resources/Services/ServiceResource.php =====
<?php

declare(strict_types=1);

namespace Platform\EnjoyTheWorld\Filament\Resources;

use BackedEnum;
use Filament\Resources\Resource;
use Filament\Schemas\Schema;
use Filament\Support\Icons\Heroicon;
use Filament\Tables\Table;
use Platform\EnjoyTheWorld\Filament\Resources\Providers\Schemas\ServiceForm;
use Platform\EnjoyTheWorld\Filament\Resources\ServiceResource\Pages;
use Platform\EnjoyTheWorld\Models\Service;
use Platform\EnjoyTheWorld\Filament\Resources\ServiceResource\Pages\{CreateService, EditService};

class ServiceResource extends Resource
{
  protected static ?string $model = Service::class;

  protected static string|BackedEnum|null $navigationIcon = Heroicon::OutlinedSparkles;

  //  protected static ?string $navigationGroup = 'Services Management';

  protected static ?int $navigationSort = 20;

  protected static bool $shouldRegisterNavigation = false;

  /**
   * Get navigation label
   *
   * @return string
   */
  public static function getNavigationLabel(): string
  {
    return __('Services');
  }

  /**
   * Get plural label
   *
   * @return string
   */
  public static function getPluralLabel(): string
  {
    return __('Services');
  }

  /**
   * Get model label
   *
   * @return string
   */
  public static function getModelLabel(): string
  {
    return __('Service');
  }

  /**
   * Configure form schema
   *
   * @param Schema $schema
   * @return Schema
   */
  public static function form(Schema $schema): Schema
  {
    return ServiceForm::configure($schema);
  }

  /**
   * Configure table (not used, only for completeness)
   *
   * @param Table $table
   * @return Table
   */
  public static function table(Table $table): Table
  {
    return $table;
  }

  /**
   * Get pages configuration
   *
   * @return array<string, \Filament\Resources\Pages\PageRegistration>
   */
  public static function getPages(): array
  {
    return [
      'create' => CreateService::route('/create'),
      'edit' => EditService::route('/{record}/edit'),
    ];
  }
}

===== platform/EnjoyTheWorld/Filament/Resources/Services/Tables/ServicesTable.php =====
<?php

namespace Platform\EnjoyTheWorld\Filament\Resources\Services\Tables;

use Filament\Actions\BulkActionGroup;
use Filament\Actions\DeleteBulkAction;
use Filament\Actions\EditAction;
use Filament\Actions\ForceDeleteBulkAction;
use Filament\Actions\RestoreBulkAction;
use Filament\Tables\Filters\TrashedFilter;
use Filament\Tables\Table;

class ServicesTable
{
    public static function configure(Table $table): Table
    {
        return $table
            ->columns([
                //
            ])
            ->filters([
                TrashedFilter::make(),
            ])
            ->recordActions([
                EditAction::make(),
            ])
            ->toolbarActions([
                BulkActionGroup::make([
                    DeleteBulkAction::make(),
                    ForceDeleteBulkAction::make(),
                    RestoreBulkAction::make(),
                ]),
            ]);
    }
}
